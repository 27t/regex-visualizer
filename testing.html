<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="js/parse.js"></script>
<script src="js/nfal.js"></script>
<script src="js/dotstring.js"></script>
<script src="http://mdaines.github.io/viz.js/bower_components/viz.js/viz.js"></script>
</head>


<input id="regex_input"></input>
<button id="parse">Parse</button>
<p id="err"></p>

<script>
$(document).ready(function(){

  $("#parse").click(function() {
	try {
		var t0 = performance.now();
		var tree = parseRegex($("#regex_input")[0].value);
		var t1 = performance.now();
		$("#err")[0].innerHTML = "";
		var NFAl = constructNFAl(tree);
		var NFA2 = trivialStates(constructNFAl(tree));
		var t2 = performance.now();
		console.log(NFAl);
		var dotstring = toDotString(NFAl);
		var dotstring2 = toDotString(NFA2);
		var t3 = performance.now();
		console.log(dotstring);
		svg = Viz(dotstring, "svg");
		svg2 = Viz(dotstring2, "svg");
		$("#err").html(svg+"<br>"+svg2);
		var t4 = performance.now();
		console.log("Parse: " + (t1-t0) + ", NFA: " + (t2-t1) + ", Dot: " + (t3-t2) + ",Viz: " + (t4-t3));
	}
	catch(e) {
		console.log(e);
		$("#err")[0].innerHTML = "Invalid regular expression"
	}
})

});
</script>

<script>


main = (function() {
	function test() {
		console.log("B");
	}
	
	return {
		test: test
	}
})();

</script>